@model IEnumerable<MyWebApp.Models.AcademicProgram>

@{
    ViewData["Title"] = "Учебные программы";
    var isAdmin = (bool?)ViewBag.IsAdmin ?? false;
}

<link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />


@{
    string GetStatusText(string status)
    {
        return status?.ToLower() switch
        {
            "approved" => "Принято",
            "rejected" => "Отклонено",
            "draft" => "Не проверена",
            "recheck" => "Перепроверить",
            _ => status
        };
    }

    string GetStatusClass(string status)
    {
        return status?.ToLower() switch
        {
            "approved" => "status-green",
            "rejected" => "status-red",
            "recheck" => "status-orange",
            "draft" => "status-gray",
            _ => "status-gray"
        };
    }
}

<div class="container program-container">

    <a href="/" class="back-button">
        <span class="back-icon">←</span> На главную
    </a>

    <h2 class="program-page-title"> Учебные программы (@Model.Count())</h2>


    @if (isAdmin)
    {
        <div class="admin-actions-bar">
            <a asp-controller="AcademicProgram" asp-action="Create" class="btn btn-primary add-program-button">
                Добавить программу
            </a>
        </div>
        <hr class="separator" />
    }

    <div class="program-list">
        @if (Model.Any())
        {
            @foreach (var item in Model)
            {

                <a asp-action="Details" asp-route-id="@item.Id" class="program-card">


                    <div class="program-discipline-header">
                        <h3 class="program-discipline-name">@item.Discipline?.Name</h3>
                        <span class="program-year-badge">@item.StartYear</span>
                    </div>


                    <div class="program-body">
                        <p class="program-specialty-info">
                            <span class="label">Специальность:</span>
                            <span class="value specialty-name">@item.Specialty?.Name</span>
                        </p>
                        <p class="program-specialty-info">
                            <span class="label">Направление:</span>
                            <span class="value">@item.Specialty?.Direction</span>
                        </p>
                        <p class="program-name-value">Программа: @item.Name</p>
                    </div>


                    <div class="program-footer">
                        <div class="footer-item">

                            <span class="icon"><i class="far fa-clock"></i></span> @item.Specialty?.Duration лет
                        </div>
                        <div class="footer-item">

                            <span class="icon"><i class="fas fa-graduation-cap"></i></span> @item.Specialty?.Qualification
                        </div>
                        <div class="footer-item">

                            <span class="status-indicator @GetStatusClass(item.Status)">
                                @GetStatusText(item.Status)
                            </span>
                        </div>
                    </div>

                </a>
            }
        }
        else
        {
            <div class="empty-message">
                Нет доступных учебных программ.
            </div>
        }
    </div>
</div>