@model IEnumerable<MyWebApp.Models.AcademicProgram>

@{
    ViewData["Title"] = "–£—á–µ–±–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã";
    var isAdmin = (bool?)ViewBag.IsAdmin ?? false; 
}

<link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />

@* === –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ô –ú–ï–¢–û–î –î–õ–Ø –ü–ï–†–ï–í–û–î–ê –°–¢–ê–¢–£–°–û–í === *@
@{
    string GetStatusText(string status)
    {
        return status?.ToLower() switch
        {
            "approved" => "–ü—Ä–∏–Ω—è—Ç–æ",
            "rejected" => "–û—Ç–∫–ª–æ–Ω–µ–Ω–æ",      // <--- –î–û–ë–ê–í–ò–õ–ò –¢–ï–ö–°–¢
            "draft" => "–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞",
            "recheck" => "–ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∏—Ç—å",
            _ => status 
        };
    }

    string GetStatusClass(string status)
    {
        return status?.ToLower() switch
        {
            "approved" => "status-green",
            "rejected" => "status-red",     // <--- –î–û–ë–ê–í–ò–õ–ò –ö–õ–ê–°–° –ö–†–ê–°–ù–û–ì–û –¶–í–ï–¢–ê
            "recheck" => "status-orange",
            "draft" => "status-gray",
            _ => "status-gray"
        };
    }
}

<div class="container program-container">
    
    <a href="/" class="back-button">
        <span class="back-icon">‚Üê</span> –ù–∞ –≥–ª–∞–≤–Ω—É—é
    </a>

    <h2 class="program-page-title">üéì –£—á–µ–±–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã (@Model.Count())</h2>

    @* === –ë–õ–û–ö –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ü–†–û–ì–†–ê–ú–ú–´ (–¢–û–õ–¨–ö–û –î–õ–Ø –ê–î–ú–ò–ù–ê) === *@
    @if (isAdmin)
    {
        <div class="admin-actions-bar">
            <a asp-controller="AcademicProgram" asp-action="Create" class="btn btn-primary add-program-button">
                –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
            </a>
        </div>
        <hr class="separator" />
    }

    <div class="program-list">
        @if (Model.Any())
        {
            @foreach (var item in Model)
            {
                // –í—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞ - —ç—Ç–æ —Å—Å—ã–ª–∫–∞ –Ω–∞ Details
                <a asp-action="Details" asp-route-id="@item.Id" class="program-card">
                    
                    @* === –ë–õ–û–ö 1: –î–ò–°–¶–ò–ü–õ–ò–ù–ê –ò –ì–û–î === *@
                    <div class="program-discipline-header">
                        <h3 class="program-discipline-name">@item.Discipline?.Name</h3>
                        <span class="program-year-badge">@item.StartYear</span>
                    </div>

                    @* === –ë–õ–û–ö 2: –ò–ù–§–û–†–ú–ê–¶–ò–Ø === *@
                    <div class="program-body">
                        <p class="program-specialty-info">
                            <span class="label">–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å:</span> 
                            <span class="value specialty-name">@item.Specialty?.Name</span>
                        </p>
                        <p class="program-specialty-info">
                            <span class="label">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</span> 
                            <span class="value">@item.Specialty?.Direction</span>
                        </p>
                        <p class="program-name-value">–ü—Ä–æ–≥—Ä–∞–º–º–∞: @item.Name</p>
                    </div>
                    
                    @* === –ë–õ–û–ö 3: –ü–û–î–í–ê–õ –° –ö–ê–†–¢–û–ß–ö–û–ô –°–¢–ê–¢–£–°–ê === *@
                    <div class="program-footer">
                        <div class="footer-item">
                            <span class="icon">‚è≥</span> @item.Specialty?.Duration –ª–µ—Ç
                        </div>
                        <div class="footer-item">
                            <span class="icon">üéì</span> @item.Specialty?.Qualification
                        </div>
                        <div class="footer-item">
                            @* –í—ã–≤–æ–¥ —Å—Ç–∞—Ç—É—Å–∞ —Å —É—á–µ—Ç–æ–º —Å—Ç–∏–ª–µ–π *@
                            <span class="status-indicator @GetStatusClass(item.Status)">
                                @GetStatusText(item.Status)
                            </span>
                        </div>
                    </div>

                </a>
            }
        }
        else
        {
            <div class="empty-message">
                –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É—á–µ–±–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º.
            </div>
        }
    </div>
</div>